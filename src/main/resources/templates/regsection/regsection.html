<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
xmlns:th="http://www.thymeleaf.org" 
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3" lang="en">

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<meta name="MUM Scheduler Application" content="" />
		<meta name="Sovello" content="" />
		
		<title>MUMSched :: Home</title>
		
		<!-- Bootstrap core CSS -->
		<link th:href="@{/standard/bootstrap/css/bootstrap.min.css}" rel="stylesheet" />
		
		<!-- Custom fonts for this template -->
		<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i,900,900i" rel="stylesheet" />
		<link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,400,400i,700,700i,900,900i" rel="stylesheet" />
		<link th:href="@{/standard/font-awesome/css/font-awesome.min.css}" rel="stylesheet" />
		
		<!-- Custom styles for this template -->
		<link th:href="@{/css/mumsched.css}" rel="stylesheet" />
	</head>

	<body>
		<div class="overlay"></div>
	
	<nav class="navbar navbar-default">
	  <div class="container-fluid">
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle collapsed" 
	      data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" th:href="@{/home}">MUM</a>
	    </div>
	
	    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav navbar-right">
	      	<li><a th:href="@{/logout}">Logout</a></li>
	      	<li><a th:href="@{/home}">Home</a></li>
	        <li class="dropdown">
	          <a href="#" class="dropdown-toggle" data-toggle="dropdown" 
	          role="button" aria-haspopup="true" aria-expanded="false">Actions <span class="caret"></span></a>
	          <ul class="dropdown-menu">
	            <li class="active"><a href="">Home<span class="sr-only">(current)</span></a></li>
		        <li role="separator" class="divider"></li>
		        <li><a th:href="@{/logout}">Logout</a></li>
	          </ul>
	        </li>
	      </ul>
	    </div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>
	
	<div class="container">
		<div class="row">
			<!--<div class="col-sm-6 col-md-4 col-md-offset-4">-->
			<div class="span4 offset4 well">
				<form>
				
				<div class="form-group">
				  	<label for="header">
				  		Register To Section
				  	</label>
				  </div>
				  
				  <div class="form-group">
				    <div class="form-group">
				    <label for="selectBlock">Select Block</label>
				    <select class="form-control" id="selectBlock">
				      <!-- insert the list of data from JSON object -->
				    </select>
				  </div>
				  </div>
				  
				  <div class="form-group">
				    <div class="form-group">
				    <label for="selectCourse">Select Course</label>
				    <select class="form-control" id="selectCourse">
				    <!-- insert the list of data from JSON object -->
				     <!--  <option>1</option>
				      <option>2</option>
				      <option>3</option>
				      <option>4</option> -->
				    </select>
				  </div>
				  </div>
				  
				  <div class="form-group text-right">
				  	<label for="submitButton">
				  		<button type="button" id="btnRegSectionSubmit" class="btn btn-default btn-group">Submit</button>
				  	</label>
				  </div>
				  
				  
				  <!--
				  <div class="form-group">
				    <label for="exampleFormControlSelect2">Example multiple select</label>
				    <select multiple="multiple" class="form-control" id="exampleFormControlSelect2">
				      <option>1</option>
				      <option>2</option>
				      <option>3</option>
				      <option>4</option>
				      <option>5</option>
				    </select>
				  </div>
				  <div class="form-group">
				    <label for="exampleFormControlTextarea1">Example textarea</label>
				    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
				  </div>
					-->
				</form>    
			</div>
		</div>
	</div>
	<div class="social-icons">
		<ul class="list-unstyled text-center mb-0">
			<li class="list-unstyled-item">
				<a href="#">
					<i class="fa fa-twitter"></i>
				</a>
			</li>
			<li class="list-unstyled-item">
				<a href="#">
			    	<i class="fa fa-facebook"></i>
			  	</a>
			</li>
			<li class="list-unstyled-item">
			  	<a href="#">
			    	<i class="fa fa-instagram"></i>
			  	</a>
			</li>
		</ul>
	</div>
	
		<!-- Bootstrap core JavaScript -->
		<script th:src="@{/standard/jquery/jquery.min.js}"></script>
		<script th:src="@{/standard/bootstrap/js/bootstrap.min.js}"></script>
		
		<!-- Plugin JavaScript -->
		<script th:src="@{/standard/vide/jquery.vide.min.js}"></script>
		
		<!-- Custom scripts for this template -->
		<script th:src="@{/js/mumsched.js}"></script>
		
		<script>
		$.ajax({
	        url: "/regsection/getsectionbyid",
	        type: 'GET',
	        dataType: 'json', // added data type
	        success: function(res) {
	        	
	        	$(res.data).each(function()
	        			 {
	        			     /* alert(this.value);
	        			     alert(this.label); */

	        			     //this refers to the current item being iterated over

	        			     var option = $('<option />');
	        			     option.attr('value', this.blockName).text(this.blockName);

	        			     $('#selectBlock').append(option);
	        			 });
	        }
	    });
		
		$('#selectBlock').change(function(){ 
			$.ajax({
		        url: "/regsection/getcoursebyblockname/"+ $("#selectBlock").val(),
		        type: 'GET',
		        dataType: 'json', // added data type
		        success: function(res) {
		        	console.log(res);
		        	$(res.data).each(function()
		        			 {
		        			     /* alert(this.value);
		        			     alert(this.label); */

		        			     //this refers to the current item being iterated over

		        			     var option = $('<option />');
		        			     option.attr('value', this.courseName).text(this.courseName);

		        			     $('#selectCourse').append(option);
		        			 });
		        }
		    });
		});
		
		$('#btnRegSectionSubmit').click(function(){
			let blkName = $("#selectBlock").val();
			let courseName = $("#selectCourse").val();
			
			if(blkName.length === 0 || courseName.length === 0){
				alert("Invalid data");
				return;
			}
			
			let regData = {
					block:blkName,
					course:courseName
			};
			
			regData = JSON.stringify(regData)
			console.log(regData)
			
			$.ajax({
		        url: "/regsection",
		        type: 'post',
		        data: regData,
		        contentType: 'application/json',
		        dataType: 'json', // added data type
		        success: function(res) {
		        	console.log(res);
		        },
		        error: function() { 
		        	alert("Something went wrong"); 
		        }
		    });
		})
		</script>
	
	</body>
</html>